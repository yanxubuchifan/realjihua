<!-- pages/taskList/taskList.wxml -->
<navigation-bar title="å…¨éƒ¨ä»»åŠ¡åˆ—è¡¨" back="{{true}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- ä»»åŠ¡ç­›é€‰æ  -->
    <view class="filter-bar">
      <view class="filter-item {{currentFilter === 'all' ? 'active' : ''}}" bindtap="changeFilter" data-type="all">
        å…¨éƒ¨
      </view>
      <view class="filter-item {{currentFilter === 'pending' ? 'active' : ''}}" bindtap="changeFilter" data-type="pending">
        å¾…å¤„ç†
      </view>
      <view class="filter-item {{currentFilter === 'processing' ? 'active' : ''}}" bindtap="changeFilter" data-type="processing">
        å¤„ç†ä¸­
      </view>
      <view class="filter-item {{currentFilter === 'completed' ? 'active' : ''}}" bindtap="changeFilter" data-type="completed">
        å·²å®Œæˆ
      </view>
    </view>

    <!-- ä»»åŠ¡åˆ—è¡¨ -->
    <view class="task-list">
      <block wx:for="{{filteredTasks}}" wx:key="id" wx:for-item="task">
        <view class="task-item" bindtap="goToTaskDetail" data-id="{{task.id}}">
          <!-- ä»»åŠ¡æ ‡é¢˜å’Œä¼˜å…ˆçº§ -->
          <view class="task-header">
            <view class="task-title">{{task.title}}</view>
            <view class="task-priority" style="background-color: {{task.priority.color}}">
              {{task.priority.text}}
            </view>
          </view>

          <!-- ä»»åŠ¡è¯¦æƒ… -->
          <view class="task-details">
            <view class="task-dept">
              <text class="label">éƒ¨é—¨ï¼š</text>
              <text class="value">{{task.department}}</text>
            </view>
            <view class="task-assignee">
              <text class="label">è´Ÿè´£äººï¼š</text>
              <text class="value">{{task.assignee}}</text>
            </view>
          </view>

          <!-- ä»»åŠ¡çŠ¶æ€å’Œæˆªæ­¢æ—¥æœŸ -->
          <view class="task-footer">
            <view class="task-status" style="color: {{task.status.color}}">
              {{task.status.text}}
            </view>
            <view class="task-deadline">
              <text class="label">æˆªæ­¢ï¼š</text>
              <text class="value">{{task.deadline}}</text>
            </view>
          </view>
        </view>
      </block>
      
      <!-- ç©ºçŠ¶æ€æç¤º -->
      <view wx:if="{{filteredTasks.length === 0}}" class="empty-state">
        <view class="empty-icon">ğŸ“‹</view>
        <view class="empty-text">æš‚æ— ä»»åŠ¡</view>
      </view>
    </view>
  </view>
</scroll-view>